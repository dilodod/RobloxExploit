local anticheat = game.Workspace:FindFirstChild("DirtsAntiExploit")
if (anticheat) then
    anticheat:Destroy()
end

function collect()
    local root = game.Players.LocalPlayer.Character.HumanoidRootPart
    local parts = game.Workspace:GetDescendants()
    
    for index, part in ipairs(parts) do
        if (part.Name == "Giver") then
            firetouchinterest(root, part, 0)
            wait(0.25)
            firetouchinterest(root, part, 1)
        end
    end
end

local collecting = false
local collectThread
local autoToggleAntiKick = false

function toggleCollecting()
    collecting = not collecting
    if collecting then
        collectThread = coroutine.wrap(function()
            while collecting do
                collect()
                wait(20)
            end
        end)
        collectThread()
    end
end

local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local TitleLabel = Instance.new("TextLabel")
local ToggleButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local AutoToggleAntiKickButton = Instance.new("TextButton")
local AutoToggleLabel = Instance.new("TextLabel")
local ScriptLabel = Instance.new("TextLabel")

ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

Frame.Parent = ScreenGui
Frame.Size = UDim2.new(0, 160, 0, 120)
Frame.Position = UDim2.new(0.5, -80, 0.5, -60)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.BackgroundTransparency = 0.2
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = Frame

TitleLabel.Parent = Frame
TitleLabel.Text = "Auto Grab Money"
TitleLabel.Size = UDim2.new(0, 140, 0, 20)
TitleLabel.Position = UDim2.new(0.5, -70, 0, 10)
TitleLabel.BackgroundTransparency = 1
TitleLabel.TextScaled = true
TitleLabel.Font = Enum.Font.SourceSansBold
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextStrokeTransparency = 0.8

ToggleButton.Parent = Frame
ToggleButton.Text = "Toggle Collect"
ToggleButton.Size = UDim2.new(0, 120, 0, 30)
ToggleButton.Position = UDim2.new(0, 20, 0, 40)
ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
ToggleButton.BorderSizePixel = 0
ToggleButton.TextScaled = true
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextStrokeTransparency = 0.8
ToggleButton.Active = false
ToggleButton.Selectable = false

local toggleButtonCorner = Instance.new("UICorner")
toggleButtonCorner.CornerRadius = UDim.new(0, 10)
toggleButtonCorner.Parent = ToggleButton

CloseButton.Parent = Frame
CloseButton.Text = "X"
CloseButton.Size = UDim2.new(0, 20, 0, 20)
CloseButton.Position = UDim2.new(1, -25, 0, 5)
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
CloseButton.BorderSizePixel = 0
CloseButton.TextScaled = true
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextStrokeTransparency = 0.8

local closeButtonCorner = Instance.new("UICorner")
closeButtonCorner.CornerRadius = UDim.new(0, 10)
closeButtonCorner.Parent = CloseButton

AutoToggleAntiKickButton.Parent = Frame
AutoToggleAntiKickButton.Size = UDim2.new(0, 20, 0, 20)
AutoToggleAntiKickButton.Position = UDim2.new(0, 20, 0, 80)
AutoToggleAntiKickButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
AutoToggleAntiKickButton.BorderSizePixel = 0
AutoToggleAntiKickButton.Text = ""

local autoToggleAntiKickButtonCorner = Instance.new("UICorner")
autoToggleAntiKickButtonCorner.CornerRadius = UDim.new(0, 10)
autoToggleAntiKickButtonCorner.Parent = AutoToggleAntiKickButton

AutoToggleLabel.Parent = Frame
AutoToggleLabel.Size = UDim2.new(0, 120, 0, 20)
AutoToggleLabel.Position = UDim2.new(0, 45, 0, 80)
AutoToggleLabel.BackgroundTransparency = 1
AutoToggleLabel.Text = "Anti Kick"
AutoToggleLabel.TextScaled = true
AutoToggleLabel.Font = Enum.Font.SourceSansBold
AutoToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoToggleLabel.TextStrokeTransparency = 0.8

ScriptLabel.Parent = Frame
ScriptLabel.Text = "agurecscript//t.me"
ScriptLabel.Size = UDim2.new(0, 140, 0, 20)
ScriptLabel.Position = UDim2.new(0.5, -70, 1, -30)
ScriptLabel.BackgroundTransparency = 1
ScriptLabel.TextScaled = true
ScriptLabel.Font = Enum.Font.SourceSansBold
ScriptLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptLabel.TextStrokeTransparency = 0.8

local function updateAutoToggleAntiKickButton()
    if autoToggleAntiKick then
        AutoToggleAntiKickButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        ToggleButton.Active = false
        ToggleButton.Selectable = false
    else
        AutoToggleAntiKickButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        ToggleButton.Active = true
        ToggleButton.Selectable = true
    end
end

ToggleButton.MouseButton1Click:Connect(function()
    toggleCollecting()
    if collecting then
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    else
        ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    end
end)

CloseButton.MouseButton1Click:Connect(function()
    collecting = false
    autoToggleAntiKick = false
    ScreenGui:Destroy()
end)

AutoToggleAntiKickButton.MouseButton1Click:Connect(function()
    autoToggleAntiKick = not autoToggleAntiKick
    updateAutoToggleAntiKickButton()
end)

local function checkHealth()
    while true do
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("Humanoid") then
            local health = character.Humanoid.Health
            local maxHealth = character.Humanoid.MaxHealth
            if health / maxHealth < 0.3 then
                collecting = false
                if ToggleButton.BackgroundColor3 ~= Color3.fromRGB(255, 0, 0) then
                    ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                end
            elseif health == maxHealth and autoToggleAntiKick then
                collecting = true
                if ToggleButton.BackgroundColor3 ~= Color3.fromRGB(0, 255, 0) then
                    ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                end
            end
        end
        wait(1)
    end
end

coroutine.wrap(checkHealth)()

updateAutoToggleAntiKickButton()

game.Players.LocalPlayer.Chatted:Connect(function(msg)
    if msg == "!hideC" then
        Frame.Visible = false
    elseif msg == "!unhideC" then
        Frame.Visible = true
    elseif msg == "!statC" then
        Frame.Position = UDim2.new(0.5, -80, 0.5, -60)
    elseif msg == "!deleteC" then
        collecting = false
        autoToggleAntiKick = false
        ScreenGui:Destroy()
    end
end)

game.StarterGui:SetCore("ChatMakeSystemMessage", {
    Text = "Script created by agurecscript//t.me\n\n!hideC - Hide the script\n!unhideC - Unhide the script\n!statC - Center the script\n!deleteC - Delete the script";
    Color = Color3.fromRGB(255, 255, 255);
    Font = Enum.Font.SourceSansBold;
    FontSize = Enum.FontSize.Size18;
    TextStrokeTransparency = 0.8;
})
