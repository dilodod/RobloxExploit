
local player = game.Players.LocalPlayer
local humanoidRootPart = player.Character:WaitForChild("HumanoidRootPart")

-- Создание GUI для меню
local screenGui = Instance.new("ScreenGui", player.PlayerGui)
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 200, 0, 100)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)

-- Кнопка для включения/выключения телепортации
local teleportToggle = Instance.new("TextButton", frame)
teleportToggle.Size = UDim2.new(1, 0, 0.5, 0)
teleportToggle.Position = UDim2.new(0, 0, 0, 0)
teleportToggle.Text = "Телепортация: ВЫКЛ"
teleportToggle.BackgroundColor3 = Color3.new(1, 0, 0)
teleportToggle.TextColor3 = Color3.new(1, 1, 1)

-- Галочка для включения телепортации к специальным цветам (RGB (255, 176, 0))
local specialCheckbox = Instance.new("TextButton", frame)
specialCheckbox.Size = UDim2.new(1, 0, 0.5, 0)
specialCheckbox.Position = UDim2.new(0, 0, 0.5, 0)
specialCheckbox.Text = "Телепорт к специальным: ВЫКЛ"
specialCheckbox.BackgroundColor3 = Color3.new(1, 0, 0)
specialCheckbox.TextColor3 = Color3.new(1, 1, 1)

-- Переменные для управления
local teleportEnabled = false
local teleportToSpecial = false

-- Управление включением/выключением телепортации
teleportToggle.MouseButton1Click:Connect(function()
    teleportEnabled = not teleportEnabled
    if teleportEnabled then
        teleportToggle.Text = "Телепортация: ВКЛ"
        teleportToggle.BackgroundColor3 = Color3.new(0, 1, 0)
    else
        teleportToggle.Text = "Телепортация: ВЫКЛ"
        teleportToggle.BackgroundColor3 = Color3.new(1, 0, 0)
    end
end)

-- Управление галочкой для специальных объектов (RGB(255, 176, 0))
specialCheckbox.MouseButton1Click:Connect(function()
    teleportToSpecial = not teleportToSpecial
    if teleportToSpecial then
        specialCheckbox.Text = "Телепорт к специальным: ВКЛ"
        specialCheckbox.BackgroundColor3 = Color3.new(0, 1, 0)
    else
        specialCheckbox.Text = "Телепорт к специальным: ВЫКЛ"
        specialCheckbox.BackgroundColor3 = Color3.new(1, 0, 0)
    end
end)

-- Функция для вычисления расстояния между двумя точками
local function distanceBetween(pos1, pos2)
    return (pos1 - pos2).Magnitude
end

-- Функция для проверки цвета (красный, зелёный и специальный)
local function isGreen(color)
    local r, g, b = math.floor(color.R * 255), math.floor(color.G * 255), math.floor(color.B * 255)
    return (r == 0 and g == 200 and b == 0)
end

local function isRed(color)
    local r, g, b = math.floor(color.R * 255), math.floor(color.G * 255), math.floor(color.B * 255)
    return (r == 117 and g == 0 and b == 0)
end

local function isSpecialColor(color)
    local r, g, b = math.floor(color.R * 255), math.floor(color.G * 255), math.floor(color.B * 255)
    return (r == 255 and g == 176 and b == 0)
end

-- Функция для телепортации к объектам "Head" и "Tool" в радиусе 60 блоков
local function teleportToObjectsInRadius(radius)
    -- Создаем пустые списки для объектов разных цветов
    local headsInRangeGreen = {}
    local headsInRangeRed = {}
    local headsInRangeSpecial = {}

    -- Обновляем список объектов
    local function updateObjectsInRange()
        headsInRangeGreen = {}
        headsInRangeRed = {}
        headsInRangeSpecial = {}

        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("Part") and (obj.Name == "Head" or obj.Name == "Tool") then
                local distance = distanceBetween(humanoidRootPart.Position, obj.Position)
                if distance <= radius and obj.Transparency < 1 then
                    if isGreen(obj.Color) then
                        table.insert(headsInRangeGreen, obj)
                    elseif isRed(obj.Color) then
                        table.insert(headsInRangeRed, obj)
                    elseif teleportToSpecial and isSpecialColor(obj.Color) then
                        table.insert(headsInRangeSpecial, obj)
                    end
                end
            end
        end
    end

    -- Главный цикл телепортации
    while teleportEnabled do
        updateObjectsInRange() -- Обновляем список

        -- Телепортируемся к зелёным объектам, если они доступны
        for _, object in pairs(headsInRangeGreen) do
            humanoidRootPart.CFrame = object.CFrame + Vector3.new(0, 3, 0)
            wait(0.1)
        end

        -- Телепортируемся к красным объектам, если они доступны
        for _, object in pairs(headsInRangeRed) do
            humanoidRootPart.CFrame = object.CFrame + Vector3.new(0, 3, 0)
            wait(0.1)
        end

        -- Телепортируемся к специальным объектам, если они доступны
        for _, object in pairs(headsInRangeSpecial) do
            humanoidRootPart.CFrame = object.CFrame + Vector3.new(0, 3, 0)
            wait(0.1)
        end

        wait(0.1) -- Уменьшаем задержку для скорости
    end
end

-- Запуск функции для телепортации к объектам в радиусе 60 блоков
spawn(function()
    teleportToObjectsInRadius(60) -- Запуск процесса телепортации
end)