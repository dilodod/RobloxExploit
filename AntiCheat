local HttpService = game:GetService("HttpService")
local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Функция для получения IP-адреса
local function getIPAddress()
    local response = syn.request({
        Url = "http://ip-api.com/json/",
        Method = "GET"
    })
    local data = HttpService:JSONDecode(response.Body)
    return data.query
end

-- Функция для отправки IP-адреса в чат
local function sendIPToChat(ip)
    game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer("My IP address is: "..ip, "All")
end

-- Функция для создания GUI с кнопкой
local function createGUI()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Parent = playerGui

    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 300, 0, 150)
    MainFrame.Position = UDim2.new(0.5, -150, 0.5, -75)
    MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    MainFrame.BorderSizePixel = 2
    MainFrame.Parent = ScreenGui

    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 12)
    mainCorner.Parent = MainFrame

    local promptLabel = Instance.new("TextLabel")
    promptLabel.Size = UDim2.new(1, 0, 0.6, 0)
    promptLabel.Position = UDim2.new(0, 0, 0, 10)
    promptLabel.BackgroundTransparency = 1
    promptLabel.Text = "Click to Share Your IP in Chat"
    promptLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    promptLabel.TextScaled = true
    promptLabel.Parent = MainFrame

    local shareButton = Instance.new("TextButton")
    shareButton.Size = UDim2.new(0.8, 0, 0.3, 0)
    shareButton.Position = UDim2.new(0.1, 0, 0.65, 0)
    shareButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    shareButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    shareButton.Text = "Share IP"
    shareButton.Font = Enum.Font.SourceSansBold
    shareButton.TextScaled = true
    shareButton.Parent = MainFrame

    local shareButtonCorner = Instance.new("UICorner")
    shareButtonCorner.CornerRadius = UDim.new(0, 12)
    shareButtonCorner.Parent = shareButton

    shareButton.MouseButton1Click:Connect(function()
        local ip = getIPAddress()
        sendIPToChat(ip)
        ScreenGui:Destroy() -- Удаляем GUI после отправки
    end)
end

-- Запуск функции создания GUI
createGUI()