local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local running = false

local collectMishirinOre = false
local collectMoneyBag = false
local collectStrongSoul = false
local returnToOriginalPosition = false

--GUI
local menuGui = Instance.new("ScreenGui")
menuGui.Parent = playerGui

local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0, 150, 0, 170)
menuFrame.Position = UDim2.new(0, 10, 0.5, -85)
menuFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
menuFrame.BorderSizePixel = 0
menuFrame.Active = true
menuFrame.Draggable = true
menuFrame.Parent = menuGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = menuFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -20, 0, 20)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Auto Collect"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextScaled = true
titleLabel.Parent = menuFrame

local agurecLabel = Instance.new("TextLabel")
agurecLabel.Size = UDim2.new(1, 0, 0, 15)
agurecLabel.Position = UDim2.new(0, 0, 1, -15)
agurecLabel.BackgroundTransparency = 1
agurecLabel.Text = "agurecscript//t.me"
agurecLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
agurecLabel.TextScaled = true
agurecLabel.Parent = menuFrame

local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0.9, 0, 0.2, 0)
toggleButton.Position = UDim2.new(0.05, 0, 0.7, 0)
toggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Text = "OFF"
toggleButton.TextScaled = true
toggleButton.Parent = menuFrame

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 12)
toggleCorner.Parent = toggleButton
local function createCheckbox(labelText, posY, callback)
    local checkboxFrame = Instance.new("Frame")
    checkboxFrame.Size = UDim2.new(1, -20, 0.2, 0)
    checkboxFrame.Position = UDim2.new(0, 10, 0, posY)
    checkboxFrame.BackgroundTransparency = 1
    checkboxFrame.Parent = menuFrame

    local checkbox = Instance.new("TextButton")
    checkbox.Size = UDim2.new(0, 15, 0, 15)
    checkbox.Position = UDim2.new(0, 0, 0.5, -7.5)
    checkbox.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    checkbox.TextColor3 = Color3.fromRGB(255, 255, 255)
    checkbox.Text = ""
    checkbox.Parent = checkboxFrame

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -25, 1, 0)
    label.Position = UDim2.new(0, 20, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = labelText
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextScaled = true
    label.Parent = checkboxFrame

    checkbox.MouseButton1Click:Connect(function()
        callback()
        if checkbox.BackgroundColor3 == Color3.fromRGB(0, 255, 0) then
            checkbox.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        else
            checkbox.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        end
    end)
end

createCheckbox("Ore", 20, function()
    collectMishirinOre = not collectMishirinOre
end)

createCheckbox("Money", 40, function()
    collectMoneyBag = not collectMoneyBag
end)

createCheckbox("Soul", 60, function()
    collectStrongSoul = not collectStrongSoul
end)

createCheckbox("Return", 80, function()
    returnToOriginalPosition = not returnToOriginalPosition
end)
local function triggerProximityPrompt(prompt)
    fireproximityprompt(prompt)
end

local function autoPickup()
    local originalPosition = nil
    while running do
        local prompts = {}
        for _, prompt in pairs(game.Workspace:GetDescendants()) do
            if prompt:IsA("ProximityPrompt") and prompt.ActionText == "Pick up" then
                table.insert(prompts, prompt)
            end
        end
        for _, prompt in ipairs(prompts) do
            local objectText = prompt.ObjectText
            if (collectMishirinOre and objectText == "Mishirin Ore") or 
               (collectMoneyBag and objectText == "Money Bag") or 
               (collectStrongSoul and objectText == "Strong Soul") then
                local playerHRP = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                if playerHRP then
                    if returnToOriginalPosition and not originalPosition then
                        originalPosition = playerHRP.CFrame
                    end
                    playerHRP.CFrame = prompt.Parent.CFrame
                    wait(0.05)
                    triggerProximityPrompt(prompt)
                    if returnToOriginalPosition and originalPosition then
                        playerHRP.CFrame = originalPosition
                    end
                end
            end
        end
        wait(0.5)
    end
end

toggleButton.MouseButton1Click:Connect(function()
    running = not running
    if running then
        toggleButton.Text = "ON"
        toggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        spawn(autoPickup)
    else
        toggleButton.Text = "OFF"
        toggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    end
end)
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 15, 0, 15)
closeButton.Position = UDim2.new(1, -20, 0, 5)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Text = "X"
closeButton.TextScaled = true
closeButton.Parent = menuFrame

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(1, 0)
closeCorner.Parent = closeButton

closeButton.MouseButton1Click:Connect(function()
    running = false
    menuGui:Destroy()
end)

game.Players.LocalPlayer.Chatted:Connect(function(msg)
    if msg == "!hideP" then
        menuFrame.Visible = false
    elseif msg == "!unhideP" then
        menuFrame.Visible = true
    elseif msg == "!statP" then
        menuFrame.Position = UDim2.new(0.5, -75, 0.5, -85)
    elseif msg == "!deleteP" then
        running = false
        menuGui:Destroy()
    end
end)

game.StarterGui:SetCore("ChatMakeSystemMessage", {
    Text = "Script by agurecscript//t.me. To hide the menu, type !hideP. To unhide, type !unhideP. To center, type !statP.";
    Color = Color3.fromRGB(255, 255, 255);
    Font = Enum.Font.SourceSansBold;
    FontSize = Enum.FontSize.Size18;
})